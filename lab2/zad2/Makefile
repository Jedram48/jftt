# Define the name of the output program
TARGET = remove_ada_comments

# Define the source file for FLEX
FLEX_SRC = remove_ada_comments.l

# Define the output C file generated by FLEX
LEX_OUTPUT = lex.yy.c

# Compiler and flags
CC = gcc
CFLAGS = -Wall
LDFLAGS = -lfl

# Rule to build the final executable
$(TARGET): $(LEX_OUTPUT)
	$(CC) $(CFLAGS) $(LEX_OUTPUT) $(LDFLAGS) -o $(TARGET)

# Rule to generate the lex.yy.c file from the FLEX source
$(LEX_OUTPUT): $(FLEX_SRC)
	flex $(FLEX_SRC)

# Rule to clean up generated files
clean:
	rm -f $(LEX_OUTPUT) $(TARGET) *.o

# Optional rule to run the program with a test file
run: $(TARGET)
	./$(TARGET) < test2.adb

all: $(TARGET)
