# Define the name of the output program
TARGET = cleaner

# Define the source file for FLEX
FLEX_SRC = cleaner.l

# Define the output C file generated by FLEX
LEX_OUTPUT = lex.yy.c

# Define the object files
OBJ = lex.yy.o

# Compiler and flags
CC = gcc
CFLAGS = -Wall
LDFLAGS = -lfl

# Rule to build the final executable
$(TARGET): $(LEX_OUTPUT)
	$(CC) $(CFLAGS) $(LEX_OUTPUT) $(LDFLAGS) -o $(TARGET)

# Rule to generate the lex.yy.c file from cleaner.l using flex
$(LEX_OUTPUT): $(FLEX_SRC)
	flex $(FLEX_SRC)

# Rule to clean up generated files
clean:
	rm -f $(LEX_OUTPUT) $(TARGET) *.o

# Optional rule to run the program with an input file
run: $(TARGET)
	./$(TARGET) < test1a.txt

all: run clean

.PHONY: clean run
