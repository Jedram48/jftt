# Define the name of the executable
TARGET = remove_comments

# Define the FLEX source file
FLEX_SRC = remove_comments.l

# Define the output C file generated by FLEX
LEX_OUTPUT = lex.yy.c

INPUT = test3.cpp

OUTPUT = output.cpp

# Compiler and flags
CC = gcc
CFLAGS = -Wall
LDFLAGS = -lfl

# Rule to build the final executable
$(TARGET): $(LEX_OUTPUT)
	$(CC) $(CFLAGS) $(LEX_OUTPUT) $(LDFLAGS) -o $(TARGET)

# Rule to generate the lex.yy.c file from the FLEX source
$(LEX_OUTPUT): $(FLEX_SRC)
	flex $(FLEX_SRC)

# Rule to clean up generated files
clean:
	rm -f $(LEX_OUTPUT) $(TARGET) $(OUTPUT)

# Rule to run the program without documentation comments
run:
	./$(TARGET) < $(INPUT) > $(OUTPUT)
	cat $(OUTPUT)

# Rule to run the program with documentation comments
run_docs:
	./$(TARGET) DOCS=1 < $(INPUT) > $(OUTPUT)
	cat $(OUTPUT)

all: $(TARGET)
